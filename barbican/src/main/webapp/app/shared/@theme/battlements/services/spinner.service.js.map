{"version":3,"file":"spinner.service.js","sourceRoot":"","sources":["../../../../.ng_build/theme/services/spinner.service.ts"],"names":[],"mappings":";;;;;AAMA,OAAO,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AACvC,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;;;;;IAUzC,0BAAsC;QAAA,aAAQ,GAAR,QAAQ;uBAHZ,EAAE;wBACT,mBAAmB;KAEI;IAElD;;;;OAIG;;;;;;IACH,yCAAc;;;;;IAAd,UAAe,MAAoB;QACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC3B;IAED;;OAEG;;;;IACH,gCAAK;;;IAAL;QACE,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;KACnB;IAED;;OAEG;;;;IACH,+BAAI;;;IAAJ;QACE,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;IAEO,qCAAU,GAAlB,UAAmB,IAAe;QAAlC,iBASC;QATkB,qBAAA,EAAA,sBAAe;QAChC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;YACpC,KAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;SACzB,CAAC;aACC,KAAK,CAAC,UAAC,KAAK;;YAEX,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACtB,CAAC,CAAC;KACN;IAED,8CAA8C;;IACtC,sCAAW;;IAAnB;QACE,IAAM,EAAE,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACpC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACP,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC;SAC/B;KACF;IAEO,sCAAW,GAAnB;QACE,IAAM,EAAE,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACpC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACP,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC;SAC9B;KACF;IAEO,4CAAiB,GAAzB;QACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACpD;;;gDAtDY,MAAM,SAAC,QAAQ;;2BAjB9B;;SAYa,gBAAgB","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * Service to control the global page spinner.\n */\nexport class NbSpinnerService {\n\n  private loaders: Promise<any>[] = [];\n  private selector: string = 'nb-global-spinner';\n\n  constructor(@Inject(DOCUMENT) private document) {}\n\n  /**\n   * Appends new loader to the list of loader to be completed before\n   * spinner will be hidden\n   * @param method Promise<any>\n   */\n  registerLoader(method: Promise<any>): void {\n    this.loaders.push(method);\n  }\n\n  /**\n   * Clears the list of loader\n   */\n  clear(): void {\n    this.loaders = [];\n  }\n\n  /**\n   * Start the loader process, show spinnder and execute loaders\n   */\n  load(): void {\n    this.showSpinner();\n    this.executeAll();\n  }\n\n  private executeAll(done = () => {}): void {\n    Promise.all(this.loaders).then((values) => {\n      this.hideSpinner();\n      done.call(null, values);\n    })\n      .catch((error) => {\n        // TODO: Promise.reject\n        console.error(error);\n      });\n  }\n\n  // TODO is there any better way of doing this?\n  private showSpinner(): void {\n    const el = this.getSpinnerElement();\n    if (el) {\n      el.style['display'] = 'block';\n    }\n  }\n\n  private hideSpinner(): void {\n    const el = this.getSpinnerElement();\n    if (el) {\n      el.style['display'] = 'none';\n    }\n  }\n\n  private getSpinnerElement() {\n    return this.document.getElementById(this.selector);\n  }\n}\n"]}